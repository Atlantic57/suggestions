!function t(e,i,n){function s(h,r){if(!i[h]){if(!e[h]){var a="function"==typeof require&&require;if(!r&&a)return a(h,!0);if(o)return o(h,!0);var l=new Error("Cannot find module '"+h+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[h]={exports:{}};e[h][0].call(u.exports,function(t){var i=e[h][1][t];return s(i?i:t)},u,u.exports,t,e,i,n)}return i[h].exports}for(var o="function"==typeof require&&require,h=0;h<n.length;h++)s(n[h]);return s}({1:[function(t,e,i){"use strict";function n(t,e,i){return new s(t,e,i)}var s=t("./src/suggestions");window.Suggestions=e.exports=n},{"./src/suggestions":4}],2:[function(t,e,i){function n(){for(var t={},e=0;e<arguments.length;e++){var i=arguments[e];for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}return t}e.exports=n},{}],3:[function(t,e,i){"Use strict";var n=function(t){return this.component=t,this.items=[],this.active=0,this.element=document.createElement("ul"),this.element.className="suggestions",t.el.parentNode.insertBefore(this.element,t.el.nextSibling),this};n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(t){this.items.push(t)},n.prototype.clear=function(){this.items=[],this.active=0},n.prototype.isEmpty=function(){return 0===this.element.children.length},n.prototype.draw=function(){if(this.element.innerHTML="",0===this.items.length)return void this.hide();for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()},n.prototype.drawItem=function(t,e){var i=document.createElement("li"),n=document.createElement("a");e&&(i.className+=" active"),n.innerHTML=this.component.highlight(t),i.appendChild(n),this.element.appendChild(i),i.addEventListener("mousedown",function(){this.handleMouseDown.call(this,t)}.bind(this))},n.prototype.handleMouseDown=function(t){this.component.value(t),this.clear(),this.draw()},n.prototype.move=function(t){this.active=t,this.draw()},n.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},e.exports=n},{}],4:[function(t,e,i){"use strict";var n=t("xtend"),s=t("./list"),o=function(t,e,i){return i=i||{},this.options=n({minLength:2,limit:5},i),this.el=t,this.data=e||[],this.list=new s(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(t){this.handleKeyUp.call(this,t.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(t){this.handleKeyDown.call(this,t)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus.call(this)}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur.call(this)}.bind(this)),this.update=function(t){this.data=t,this.handleKeyUp.call(this)}.bind(this),this};o.prototype.handleKeyUp=function(t){return 40!==t&&38!==t&&27!==t&&13!==t&&9!==t?(this.query=this.filter(this.el.value),this.list.clear(),this.query.length<this.options.minLength?void this.list.draw():void this.getCandidates(function(t){for(var e=0;e<t.length&&(this.list.add(t[e]),this.options.limit===!1||e!==this.limit);e++);this.list.draw()}.bind(this))):void 0},o.prototype.handleKeyDown=function(t){var e=t.keyCode;switch(e){case 13:this.list.isEmpty()||(this.value(this.list.items[this.list.active]),this.list.hide());break;case 27:case 9:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},o.prototype.handleBlur=function(){this.list.hide()},o.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show()},o.prototype.filter=function(t){return t=t.toLowerCase()},o.prototype.match=function(t){return t.indexOf(this.query)>-1},o.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")},o.prototype.getCandidates=function(t){for(var e=[],i=0;i<this.data.length;i++){var n=this.getItemValue(this.data[i]);this.match(this.filter(n))&&e.push(this.data[i])}t(e)},o.prototype.getItemValue=function(t){return t},o.prototype.highlight=function(t){return this.getItemValue(t).replace(new RegExp("^("+this.query+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},e.exports=o},{"./list":3,xtend:2}]},{},[1]);
